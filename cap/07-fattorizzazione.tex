\label{cap:fattorizzazione}
\chapter{Sistemi di Fattorizzazione}
\section{La relazione di ortogonalità}
La nozione di \emph{sistema di fattorizzazione} in una categoria è uno dei concetti più antichi della teoria; Mac Lane produsse un esempio di sistema di fattorizzazione nella categoria dei gruppi nel 1948, \cite{maclane_grp_duality}.\footnote{L'articolo in questione è molto breve, e istruttivo a proposito dell'intuizione che, pochi anni dopo la sua prima definizione esplicita, la nozione di categoria aveva per il suo inventore; è anche un reperto storico sulla terminologia matematica e su come essa è evoluta: una categoria equipaggiata con un sistema di fattorizzazione viene chiamata una \emph{bicategoria} da Mac Lane, termine che oggi è riservato a una struttura che nulla ha a che vedere con la fattorizzazione di morfismi. Notiamo anche che la definizione che daremo in \ref{fat_funno} è leggermente diversa, ma equivalente, a quella proposta da Mac Lane, che chiede che ogni morfismo \(f : X\to Y\) si fattorizzi come una composizione \(m\cmp u\cmp e\), dove \(m\) è un monomorfismo, \(e\) un epimorfismo, e \(u\) un isomorfismo. L'assiomatica proposta da Mac Lane serviva a determinare una nozione di decomposizione di una categoria \(\ctC\) mediante due sottoclassi \(\ctE,\ctM\subseteq\ctC_1\) tali che se \((\ctE,\ctM)\) determina una fattorizzazione su \(\ctC\), allora \((\ctM^\op,\ctE^\op)\) determina una fattorizzazione su \(\ctC^\op\).} Da quel momento, la nozione ha dimostrato di essere fondamentale per unificare diverse costruzioni universali in algebra, logica e (soprattutto) in topologia.

\medskip
L'intuizione fondamentale dietro la definizione è la seguente osservazione/lemma:
\begin{lemma}\label{fatt_in_set}
	Se \(\ctSet\) denota la categoria di insiemi e funzioni di \ref{ex_cat_insiemi}, ogni funzione \(f : X \to Y\) si fattorizza come \(f = m \cmp e\), dove \(m\) è iniettiva (un monomorfismo, si veda \ref{monoepi_in_set}) ed \(e\) è suriettiva.% (un epimorfismo, si veda \ref{def_Epi}).
\end{lemma}
In più, abbiamo preannunciato in \ref{caratt_epi_con_ort} che la nozione di epimorfismo e di monomorfismo ammettono una ulteriore caratterizzazione nei termini seguenti (rammentiamo il contenuto di \ref{caratt_epi_con_ort} per facilità di lettura): il lemma \ref{fatt_in_set} permette di dimostrare questo fatto in modo molto elegante.
\begin{proposition*}
	Sia \(p : E \to B\) una funzione tra insiemi; le seguenti condizioni sono equivalenti:
	\begin{itemize}
		\item \(p\) è un epimorfismo (si veda \ref{def_Mono});
		\item in ogni diagramma di insiemi e funzioni come il seguente:
		      \[\begin{tikzcd}
				      E \ar[r, "f"]\ar[d, "p"']& X \ar[d, "m"]\\
				      B \ar[r, "g"'] \ar[ur, dashed, "u"]& Y
			      \end{tikzcd}\]
		      dove \(m : X\to Y\) è un monomorfismo, esiste un unico morfismo \(u : B\to X\) tale che \(u\cmp p = f\) e \(m\cmp u = g\).
	\end{itemize}
\end{proposition*}
\begin{proof}
	\Todo{}
\end{proof}
Questo motiva la nozione di \emph{ortogonalità} tra morfismi e di \emph{fattorizzazione} di ogni morfismo \(f : X\to Y\) di una categoria \(\ctC\) come una certa composizione
\[
	\begin{tikzcd}
		f : X \ar[r, "e", two heads]& F \ar[r, "m", hook] & Y.
	\end{tikzcd}
\]
L'esempio più importante di fattorizzazione di questo tipo sarà proprio quando \(\ctE\) è la classe degli epimorfismi di \(\ctC\) ed \(\ctM\) è la classe dei monomorfismi, sebbene non l'unico interessante.

L'intuizione che chi sta leggendo dovrebbe avere sulla definizione è questa: una struttura del genere imposta su una categoria \(\ctC\) permette di `generarla' a partire dalle classi \(\ctE,\ctM\), in una notazione suggestiva, cioè, è vero che \(\hom(\ctC) = \ctM\cmp \ctE\). In più, le due classi \(\ctE,\ctM\) sono `ortogonali' nel senso che hanno intersezione più piccola possibile: \(\ctE\cap \ctM\) consta del \emph{cuore} (si veda \ref{def_cuore}) di \(\ctC\), cioè della categoria di tutti gli isomorfismi in \(\ctC\).

\medskip
% \section[Ortogonalità]{La relazione di ortogonalità}
Sulla classe dei morfismi di una generica categoria \(\ctC\) è possibile definire una relazione binaria detta \emph{ortogonalità}, nel modo che segue.
\begin{definition}[Relazione di ortogonalità]\label{def_ortogona}\index{Ortogonalità}\index{Morfismi!--- ortogonali}\index{Relazione!---di ortogonalità}
	Dati due morfismi \(f : X\to Y\) e \(g : A\to B\) diciamo che \(f\) è ortogonale a sinistra a \(g\), o che \(g\) è ortogonale a destra a \(f\), o che \(f\) e \(g\) sono \emph{ortogonali} se in ogni quadrato commutativo della forma
	\[
		\begin{tikzcd}
			X \ar[d, "f"']\ar[r, "u"]& A\ar[d, "g"] \\
			Y \ar[r, "v"']& B
		\end{tikzcd}
	\]
	esiste un unico morfismo \(a : Y\to A\) tale che \(a\cmp f=u\) e \(g\cmp a=v\).
\end{definition}
La relazione di ortogonalità è una sottoclasse \(O^\ctC \subseteq \hom(\ctC)\) e il fatto che \((f,g)\in O^\ctC\) verrà sempre denotato con un simbolo infisso \(f\perp^\ctC g\), o semplicemente come \(f\perp g\) quando il contesto permette di determinare quale sia la categoria \(\ctC\) di riferimento (ossia, quasi sempre).

La relazione di ortogonalità è molto lontana dall'essere riflessiva, simmetrica o transitiva; \ref{} sostanzia questa osservazione con delle maniere di costruire dei controesempi.
\begin{proposition}\label{ort_to_terminale}
  Sia $\ctC$ una categoria che ha un oggetto terminale $\term$. Allora, dati un morfismo $f : X\to Y$, e un oggetto $A\in \ctC_0$, le condizioni seguenti sono equivalenti: 
  \begin{enumtag}{ot}
  \item\label{ot_1} il morfismo $f$ è ortogonale a sinistra al morfismo terminale $A\to \term$;
  \item\label{ot_2} il funtore $\ctC(\_,A)$ manda il morfismo $f$ in una biiezione 
      \[\begin{tikzcd}
        \ctC(Y,A) \ar[r, "{g\circ \_}"] & \ctC(X,A).
    \end{tikzcd}\]
  \end{enumtag}
  Dualmente, sia $\ctC$ una categoria con un oggetto iniziale $\init$. Allora, dati un morfismo $g : A\to B$, e un oggetto $Y\in\ctC_0$, le condizioni seguenti sono equivalenti:
  \begin{enumtag}{oi}
  \item \label{oi_1} il morfismo $g$ è ortogonale a destra al morfismo iniziale $\init\to Y$;
  \item \label{oi_2} il funtore $\ctC(B,\_)$ manda il morfismo $g$ in una biiezione 
      \[\begin{tikzcd}
        \ctC(Y,A) \ar[r, "{\_\circ f}"] & \ctC(Y,B).
    \end{tikzcd}\]
  \end{enumtag}
\end{proposition}
\begin{proof}
  Dimostriamo l'equivalenza di \ref{ot_1} e \ref{ot_2}, e dualizzare questo argomento dimostrerà l'equivalenza di \ref{oi_1} e \ref{oi_2}. 

  Del resto, la condizione per cui per ogni $u : X\to A$ esista un unico morfismo $\bar u : Y\to A$ tale che $\bar u\circ f = u$ è esattamente la richiesta che la funzione $u\mapsto u\circ f$ sia suriettiva (esistenza) e iniettiva (unicità).
\end{proof}
\begin{remark}\label{perche_ortogonale}
  \Todo{Diverse intuizioni sulla nomenclatura `ortogonale'.}

  Una dall'algebra lineare:\dots

  Una meno formale ma suggestiva: grazie a \ref{ort_to_terminale} la relazione di ortogonalità può essere estesa alla ortogonalità tra un morfismo e un \emph{oggetto}. Da qui\dots
\end{remark}
	Miscellanea di definizioni: classi ampie, sature, cellulari, chiuse per (co)limiti, cancellative a sinistra (destra, bilatere).
  \begin{definition}
    Una \emph{successione transfinita} di morfismi in una categoria $\ctC$ consiste di un funtore $f : \ctOrd \to \ctC$ che preserva i colimiti; in parole semplici, una successione transfinita in $\ctC$ consiste di una successione di oggetti $X_\lambda$, uno per ogni ordinale $\lambda$, e di morfismi
    \[
      \begin{tikzcd}
        X_0 \ar[r] & X_1\ar[r] & X_2 \ar[r]& \dots \ar[r] & X_\alpha \ar[r] & X_{\alpha+1}\ar[r] & \dots 
      \end{tikzcd}
    \]
    tale che per ogni ordinale limite $\lambda = \colim_{\beta<\lambda}\beta$ si abbia che $X_\lambda\cong \colim_{\beta < \lambda} X_\beta$. I morfismi di questa catena sono quindi essenzialmente di due tipi:
    \begin{itemize}
      \item $X_\alpha \to X_{\alpha+1}$ ogni volta che $\beta=\alpha+1$ è un ordinale successore;
      \item morfismi da un ordinale $\theta<\lambda$ dentro l'`oggetto limite' $\colim_{\beta<\lambda}X_\beta\cong X_\lambda$.
    \end{itemize}
    Spesso si limita la taglia di queste successioni a uno specifico ordinale limite $\lambda$, cioè si considerano solo funtori $\ctOrd_{<\lambda}\to\ctC$ (in questo modo, la categoria delle successioni transfinite $\ctOrd \to \ctC$ è legittima); in questo caso parliamo di una \emph{$\lambda$-successione in $\ctC$}. Data una ($\lambda$-)successione $f : X_0\to X_1 \to \dots$ chiamiamo la sua \emph{composizione} l'unico morfismo $X_0\to \colim_{\beta<\lambda} X_\beta$.
  \end{definition}
  \begin{proposition}
    Se una $\omega$-successione $f : \ctOrd_{<\omega}\to\ctSet$ ha la proprietà che ogni $X_n \to X_{n+1}$ è una funzione iniettiva, è iniettiva anche la composizione transfinita $X_0\to \colim_{n<\omega} X_n$.
  \end{proposition}
  \begin{proof}
    
  \end{proof}
\begin{definition}[Classi speciali di morfismi]
  Sia $\ctC$ una categoria. Una classe di morfismi $\ctK\subseteq\ctC_1$ si dice 
  \begin{itemize}
    \item \emph{ampia} se la sottocategoria individuata da $\ctK$ è ampia nel senso di \ref{}; in particolare, $\ctK$ contiene tutti i morfismi identici, e quindi tutti gli oggetti di $\ctC$, ed è chiusa per composizione.
    \item \emph{presatura} se ogni volta che sia dato un diagramma 
      \[
        \begin{tikzcd}
          A \ar[d, "k"']\ar[r, "f"]& X \\ 
          B & 
        \end{tikzcd}
      \]
      tale che $k\in\ctK$, se la somma amalgamata $\push BXA$ esiste, allora il morfismo $k' : B\to \push BXA$ è anch'esso in $\ctK$.
    \item \emph{quasisatura} se è presatura e chiusa per retratti (nella categoria dei morfismi $\ctC^\to$, si veda \ref{def_cat_frecce}): significa che, dato un diagramma 
      \[bla\]
      dove $r\circ i = 1_A$ e $r'\circ i' = 1_B$, se $k\in \ctK$, allora anche $k'\in\ctK$.
    \item \emph{cellulare} se è presatura e chiusa per composizione transfinita nel senso di \ref{}.
    \item \emph{satura} se è quasisatura e cellulare.
    \item \emph{cancellativa a destra} (risp., \emph{a sinistra}) se\dots; cancellativa, se lo è da entrambi i lati.
    \item \emph{chiusa per limiti} (risp., \emph{per colimiti}) se\dots
  \end{itemize}
\end{definition}
\begin{examples}
  \Todo{Esempi di classi ampie, sature, etc. in varie categorie}
\end{examples}
\section[Proprietà ed esempi]{Proprietà fondamentali ed esempi}
\begin{remark}
	Grazie a \ref{klext_delle_relazioni} possiamo estendere la relazione di ortogonalità a una coppia di funzioni sulle sottoclassi di \(\hom(\ctC)\),
	\[\lort{(-)} : 2^{\hom(\ctC)} \leftrightarrows 2^{\hom(\ctC)} : \rort{(-)}\]
	tali che \(\rort\ctU\subseteq\ctV\) se e solo se \(\ctU\subseteq\lort\ctV\) e definite alla maniera seguente: data una sottoclasse \(\ctU\subseteq \ctC_1\),
	\begin{gather*}
		\rort{\ctU} := \{f\in\ctC_1\mid \forall u\in\ctU.(u\perp f)\}\\
		\lort{\ctU} := \{f\in\ctC_1\mid \forall u\in\ctU.(f\perp u)\}
	\end{gather*}
	Così, possiamo definire la relazione di ortogonalità estesa alle sottoclassi di \(\hom(\ctC)\),
	\[\ctL\perp \ctR := \forall l\in\ctL,r\in\ctR.(l\perp r).\]
	Si osservi che le seguenti tre condizioni sono equivalenti (lo si dimostri come esercizio per familiarizzare con la definizione):
	\[\ctL\perp\ctR\qquad \ctL\subseteq\lort\ctR\qquad \rort\ctL\subseteq \ctR\]
\end{remark}
\begin{definition}[Prodotto di Leibniz]
	Siano \(f : A \to B\) e \(g : X\to Y\) due morfismi di ua categoria \(\ctC\). Il \emph{prodotto di Leibniz} di \(f\) e \(g\), denotato \(f\oast g\), si costruisce a partire dal prodotto fibrato
	\[
		\begin{tikzcd}
			\pull {\ctC(A,X)}{\ctC(B,Y)}{\ctC(A,Y)} \ar[r]\ar[d] & \ctC(B,Y) \ar[d, "\_\cmp f"]\\
			\ctC(A,X) \ar[r, "g\cmp\_"'] & \ctC(A,Y)
		\end{tikzcd}
	\]
	e consiste della mappa di confronto \(f\oast g : \ctC(B,X) \to \pull {\ctC(A,X)}{\ctC(B,Y)}{\ctC(A,Y)}\) indotta dalla proprietà universale.

	Diciamo che il prodotto di Leibniz di \(f,g\) è \emph{esatto} se \(f\oast g\) è una biiezione. Questo è equivalente ad affermare che il quadrato
	\[
		\begin{tikzcd}
			\ctC(B,X) \ar[d]\ar[r,"g\cmp\_"]& \ctC(B,Y)\ar[d, "\_\cmp f"]\\
			\ctC(A,X) \ar[r, "g\cmp\_"'] & \ctC(A,Y)
		\end{tikzcd}
	\]
	è un prodotto fibrato.
\end{definition}
Per orientare chi legge, è utile rendere esplicita la definizione del prodotto di Leibniz \(f\oast g\): un morfismo \(u : B\to X\) viene mandato nella coppia \((u\cmp f, g\cmp u)\), che appartiene al prodotto fibrato in questione vista l'associatività della composizione: \(g\cmp (u\cmp f) = (g\cmp u)\cmp f\).

Il prodotto di Leibniz permette di ridefinire la relazione di ortogonalità mediante l'esattezza, ossia l'invertibilità di \(f\oast g\); la dimostrazione del seguente fatto consiste nel riscrivere le due condizioni in modo che entrambe si rifrasino così:
\begin{quote}
	Per ogni coppia di morfismi \(u : X\to A\), \(v : Y\to B\) tali che \(g\cmp u=v\cmp f\), esiste un unico morfismo \(a : Y\to A\) tale che \(g\cmp a=v\) e \(a\cmp f=u\).
\end{quote}
\begin{proposition}
	Due morfismi \(f,g\) sono ortogonali (cioè \(f\perp g\) nel senso di \ref{def_ortogona}) se e solo se il prodotto di Leibniz \(f\oast g\) è esatto.
\end{proposition}
\begin{proof}
	Evidente: la condizione su \(a\) in \ref{def_ortogona} si traduce in esistenza (suriettività di \(f\oast g\)) e unicità (iniettività).
\end{proof}
\begin{definition}[Sistema di prefattorizzazione]
	\Todo{}
\end{definition}
\begin{proposition}
	Ciascuna classe in un prefact definisce l'altra --dunque la def di prefact è ridondante
\end{proposition}
\begin{definition}\label{fat_funno}\index{Fattorizzazione!--- funtoriale}
	Fattorizzazione funtoriale
\end{definition}
\begin{definition}
	L'operatore punto e virgola e le sue proprietà
\end{definition}
\begin{definition}
	Sistema di fattorizzazione: due classi, tra loro esattamente ortogonali, tali che \(\ctC_1 = \ctM \fatsemi \ctE\).
	(Remark: ci occuperemo solo di sistemi di fattorizzazione funtoriali in questo senso)
\end{definition}
\begin{itemize}
	% \item estensione ai sottoinsiemi dell'ortogonalità
	% \item Caratterizzazioni equivalenti della relazione di ortogonalità
	% \item def di prefact, interdefinibilità delle due classi
	% \item funtorialità della fattorizzazione
	% \item stabilità per lim/colim
	% \item proprietà di cancellazione
	% \item classi ampie, sature, cellulari
	\item induzione di pre-FS su categorie di funtori, slice, coslice, (comma, cocomma?)
	\item esempi in algebra, topologia, geometria, logica, eccetera (epi e mono in set; verticali e cartesiani; etc)
	\item il poset dei sistemi di fattorizzazione
\end{itemize}
\subsection{Esempi di sistemi di fattorizzazione}
\begin{example}
	Epi e mono in Set
\end{example}
Più in generale, epi e mono in ogni categoria di modelli per una segnatura
\begin{example}

\end{example}

\begin{example}

\end{example}

\begin{example}

\end{example}

\begin{example}

\end{example}

\begin{example}
	Induzione di (pre-)FS su categorie di funtori, slice, coslice, ecc.
\end{example}

\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}
\section[Fattorizzazione]{Sistemi di fattorizzazione forti e deboli}
Ortogonalità non-unica
\begin{itemize}
	\item fattorizzabilità unica ed essenzialmente unica;
	\item fattorizzabilità non-unica
	\item esempi di sistemi con fattorizzabilità non-unica
	\item indurre sistemi di fattorizzazione (argomento degli oggetti piccini)
	\item
\end{itemize}
\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}
\section[Riflessività]{Sistemi di fattorizzazione riflessivi}
\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}
\section[Mono ed epimorfismi]{Classi di mono ed epimorfismi}
\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}
\section[Iniettivi e proiettivi]{Oggetti iniettivi e proiettivi}
\Todo{Teorema di Gleason sui proiettivi in Top, da qualche parte, qui}
\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}
\section[Fattorizzazione e algebre]{Sistemi di fattorizzazione come algebre}
\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}


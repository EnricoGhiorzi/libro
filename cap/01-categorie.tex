\chapter{Categorie, funtori, trasformazioni naturali}

\section{Categorie}\label{categorie}

Prima di dare definizione formale di categoria, può essere di aiuto raccogliere degli esempi concreti per orientare i lettori.

La nozione di categoria, che introdurremo in \autoref{}, riuscirà a unificare due strutture matematiche apparentemente molto diverse tra loro:
\index{Monoide}
\begin{definition}
    Un \emph{monoide} consiste in un insieme $M$ dotato di
    \begin{itemize}
     \item un elemento $e\in M$, chiamato \emph{elemento neutro}, \emph{unità} o \emph{identità} (si noti che da ciò segue, indirettamente ma immediatamente, che $M$ è un insieme \emph{non vuoto}),
     \item Un'operazione binaria $M\times M\to M$, detta \emph{prodotto} o \emph{composizione}, e indicata con $(m,n),\mapsto m\cdot n$,
    \end{itemize}
    che soddisfano le seguenti proprietà:
    \begin{itemize}
     \item \emph{Unitalità}: per ogni $m\in M$, i prodotti $m \cdot e$ ed $e\cdot m$ sono uguali a $m$;
     \item \emph{Associatività}: per ogni $m,n,p\in M$, i prodotti $(m\cdot n)\cdot p$ ed $m\cdot (n\cdot p)$ sono uguali.
    \end{itemize}
   \end{definition}
\index{Poset}
\begin{definition}
    % \Todo{poset}
    Un \emph{insieme preordinato} o \emph{preset} consiste di un insieme $P$ dotato di una operazione binaria $\le$, solitamente indicata come un simbolo infisso $x\le y$ per significare che $(x,y)$ è un elemento di $\le$, che soddisfa le seguenti due proprietà:
    \begin{itemize}
        \item \emph{Riflessività}: \Todo{}
        \item \emph{Transitività}: \Todo{}
    \end{itemize}
    Quando la relazione $\le$ soddisfa anche la proprietà \emph{antisimmetrica}, cioè è tale per cui
    \[bla\]
    l'insieme $P$, o meglio la coppia $(P,\le)$ è un insieme parzialmente ordinato o \emph{poset}.
\end{definition}
Dimostreremo in \autoref{mon_sonocat} e in \autoref{pos_sonocat} rispettivamente che `ogni monoide è una categoria', e `ogni insieme preordinato (e a fortiori, ogni insieme parzialmente ordinato, dove la relazione $\_\le\_$ è antisimmetrica) è una categoria'. (Gli enunciati suddetti renderanno precise queste affermazioni.)
\index{Categoria!--- degli insiemi finiti}
\begin{example}
Un esempio naturale di categoria nasce considerando la classe $\ctFin$ di tutti gli insiemi finiti $[n]\defeq \{1,\dots,n\}$ (con la convenzione che $[0]=\varnothing$ sia l'insieme vuoto), e le funzioni $f : [n] \to [m]$ tra di loro. \`E evidente che non tutte tali funzioni sono componibili: una condizione necessaria --e sufficiente!-- affinché la composizione tra due funzioni $f : [p] \to [q],g : [m] \to [n]$ tra insiemi finiti sia possibile è che il dominio dell'una coincida con il codominio dell'altra, ovvero che $q=m$ e che le funzioni si possano `giustapporre' come
\[\xymatrix{
    [p] \ar[r]^-f & [q] \ar[r]^-g & [r]
}\]
La composizione di funzioni $(f,g)\mapsto g\cmp f$ perciò è una operazione che ricorda quella di un monoide (per esempio, essa è associativa quando è definita) ma è \emph{parziale}, cioè non definita tra tutte le possibili coppie $(f,g)$ di funzioni tra insiemi finiti; quale che sia la struttura matematica che la classe degli insiemi finiti forma, perciò, essa non può essere un monoide. (Un altro motivo per cui $\ctFin$ non può essere un monoide è che l'identità per la composizione di funzioni non è unica: \emph{ogni} insieme finito $[n]$ ha una sua propria funzione identica, e se $f : [m]\to [n]$, si deve avere che $f\cmp \id_{[m]}=f=\id_{[n]}\cmp f$ per funzioni identiche formalmente \emph{distinte}, sebbene definite `alla stessa maniera' da $\lambda x.x : [n]\to [n]$ e $\lambda y.y : [m]\to [m]$.)

La classe $\ctFin$ formerà una \emph{categoria}, e per lo stesso motivo faranno altrettanto
\begin{itemize}
    \item \index{Categoria!---e di strutture algebriche} la classe $\bbR\emdash\ctVect$ di tutti gli spazi vettoriali reali della forma $\bbR^n$ per un $n\ge 1$ naturale; non tutte le mappe lineari tra spazi vettoriali si possono comporre, e le applicazioni identiche sono tutte distinte;
    \item la classe di tutte le strutture algebriche di un dato tipo (gli insiemi, senza limite alla loro taglia; i gruppi, con gli omomorfismi di gruppo; gli spazi vettoriali, anche di dimensione infinita; gli spazi topologici, con le funzioni continue; eccetera).
\end{itemize}
% spazi vettoriali e mappe lineari tra di loro: gli spazi vettoriali $\bbR^n$ per diversi $n$, non tutte le mappe lineari si possono comporre. In particolare, una mappa $f:\bbR^n\to \bbR^m$ si può comporre con una mappa $g:\bbR^p\to\bbR^q$ solo se $m=p$. In altre parole, $g$ si può comporre con $f$ solo se il codominio di $f$ è uguale al dominio di $g$.
% Inoltre, non c'e solo una matrice identità, ma ce n'è una per ogni $n$.
\end{example}
% La struttura algebrica che otteniamo è una \emph{categoria}, che definiamo a breve.
\index{Classe propria}
Abbiamo utilizzato diverse volte la parola `classe': la definizione generale di categoria obbliga a farlo, dal momento che la collezione di tutte le strutture algebriche di un dato tipo è sempre `troppo grande per essere un insieme' (in un senso che formalizzeremo in dettaglio nell'Appendice \ref{fondamenti}); per il momento è sufficiente trattenere l'idea informale che una classe $\ctC$ è una collezione di elementi che ha tutte le proprietà di un insieme, a parte quella di poter essere `misurata' da un numero cardinale.

Ogni volta che è necessario, useremo costruzioni `elementari' che si possono fare sulle classi come se esse fossero insiemi: per esempio se $\ctA,\ctB$ sono classi, è lecito costruire la classe prodotto $\ctA\times\ctB$, e considerare \emph{funzioni tra classi} $F : \ctA\fun\ctB$, cioè sottoclassi $F$ del prodotto $\ctA\times\ctB$ che sono funzionali: per ogni elemento $A$ della classe $\ctA$, esiste un unico elemento $B\in\ctB$ con $(A,B)\in F$, questo elemento si denota $FA$, e a tutti gli effetti $F$ si comporta come una funzione. Di nuovo, il linguaggio preciso che formalizza queste costruzioni verrà esposto nell'appendice \ref{fondamenti}; questa imprecisione iniziale sarà sempre del tutto innocua, e per il momento invitiamo i lettori a considerare il desiderio di approfondire la cosa solo una inutile distrazione.
\index{Categoria}
\begin{definition}[Categoria]
 Una \emph{categoria} $\ctC$ consiste dei seguenti dati:
 \begin{enumtag}{c}
  \item\label{c_1} una classe $\ctC_0$ i cui elementi chiamiamo \emph{oggetti}, di solito indicati con lettere latine maiuscole: $A$, $B$, $X$, $Y$,\dots
  \item\label{c_2} una classe $\ctC_1$ i cui elementi chiamiamo \emph{morfismi} o \emph{frecce}, di solito indicati con lettere latine minuscole: $f$, $g$, $h$,\dots
  \item\label{c_3} Ad ogni morfismo $f$ corrispondono due oggetti $\dom{f}$, $\cod{f}$ chiamati \emph{dominio} e \emph{codominio}. Per denotare il fatto che $f$ ha dominio $X\in\ctC_0$ e codominio $Y\in\ctC_0$, scriveremo $f\colon X\to Y$, o in \emph{forma diagrammatica}, $X \xrightarrow{f} Y$.
  \item\label{c_4} Ogni oggetto $X$ ha un morfismo distinto $\id_X\colon X\to X$ chiamato \emph{identità} o \emph{freccia identità}.
  \item\label{c_5} Per ogni coppia di morfismi $f\colon X\to Y$ e $g\colon Y\to Z$, cioè tali che $\cod{f}=\dom{g}$), è dato un morfismo $g\circ f:X\to Z$ chiamato \emph{composizione di $f$ e $g$}. Graficamente:
  \[
  \begin{tikzcd}
   X \ar{r}{f}
   \ar[rounded corners,out=-45, in=225]{rr}[swap]{g\circ f}
%    \ar[rounded corners,
%             to path={ -- ([xshift=2ex]\tikztostart.south)
%                       |- (T.center) \tikztonodes
%                       -| ([xshift=-2ex]\tikztotarget.south)
%                       -- (\tikztotarget)}]{rr}
   & Y \ar{r}{g} & Z \\
   &&
  \end{tikzcd}
  \]
Incidentalmente, osserviamo che $\dom{g\circ f}=\dom{f}$ e $\cod{g\circ f}=\cod{g}$.
\end{enumtag}
  A questi dati, chiediamo di soddisfare le seguenti proprietà:
\begin{enumtag}{p}
  \item \label{p_1} \emph{Unitalità}: per ogni morfismo $f:X\to Y$, le composizioni $f\circ\id_X$ e $\id_Y\circ f$ sono uguali a $f$.
  \item \label{p_2} \emph{Associatività}: dati oggetti $X,Y,Z,W$ e morfismi $f\colon X\to Y$, $g\colon Y\to Z$ e $h\colon Z\to W$, le composizioni $h\circ (g\circ f)$ e $(h\circ g)\circ f$ sono uguali.
 \end{enumtag}
\end{definition}
\begin{notation}
Dati due oggetti $X$ e $Y$, indichiamo con $\Hom{\ctC}(X,Y)$ la classe di morfismi da $X$ a $Y$. Altre notazioni, come $\mathrm{Hom}(X,Y)$ o $\mathrm{Hom}_\ctC(X,Y)$, sono ugualmente comuni, e motivate dal fatto che le frecce di una categoria astraggono la nozione di \emph{omomorfismo} tra insiemi strutturati (si veda \autoref{sigma_strutture} e l'esempio \autoref{sigma_strutture_sono_cat}).
% todo: mettere in una definizione sola "tutte" le categorie di strutture algebriche.
\end{notation}
\begin{remark}
    Si osservi che dalla definizione appena data discendono due corollari:
    \begin{itemize}
        \item Le classi $\Hom{\ctC}(X,Y)$ al variare di $(X,Y)\in\ctC_0\times\ctC_0$ sono tutte disgiunte, perché la corrispondenza $\ctC_1 \to \ctC_0\times\ctC_0$ che manda $f$ nella coppia $\dom{f},\cod{f}$ è una funzione (e allora la sua `fibra' sopra $(X,Y)$ è proprio $\Hom{\ctC}(X,Y)$, disgiunto da $\Hom{\ctC}(X',Y')$);
        \item come conseguenza immediata, se $X\ne X'$ sono oggetti diversi, le identità $\id_X,\id_{X'}$ sono morfismi diversi: si può cioè pensare la corrispondenza $X\mapsto \id_X : \ctC_0\to\ctC_1$ come una funzione \emph{iniettiva} tra classi.
    \end{itemize}
\end{remark}
\begin{definition}[Categoria piccola, categoria localmente piccola]
    \index{Categoria!--- piccola}
    \index{Categoria!--- loc. piccola}
    Quando la classe $\ctC_1$ è un insieme, come conseguenza dell'ultima osservazione fatta, è un insieme anche $\ctC_0$: in tal caso chiamamo la categoria $\ctC$ \emph{piccola}: le categorie $\ctFin$ e $\bbR\emdash\ctVect$ definite sopra sono piccole.

    Invece, $\ctC$ si dice \emph{localmente piccola} se dati ogni due oggetti $X$ e $Y$, la classe $\Hom{\ctC}(X,Y)$ di morfismi da $X$ a $Y$ è un insieme. La categoria di \emph{tutti} gli insiemi finiti non è, strettamente parlando, piccola (perché c'è una classe propria anche solo di insiemi con un singolo elemento), ma è localmente piccola, perché fissati due insiemi $X,Y$, l'insieme delle funzioni $f : X\to Y$ è un sottoinsieme di $2^{X\times Y}$, e quest'ultimo è un insieme.
\end{definition}
\begin{remark}
    Gli assiomi di categoria non impediscono di costruire `categorie' dove $\ctC_0$ è un insieme (per esempio, finito) e dove alcuni o tutti $\Hom{\ctC}(X,Y)$ sono classi; queste costruzioni sono però relativamente innaturali, e non ne parleremo mai.
\end{remark}
Nel resto della sezione raccogliamo alcuni esempi classici di categorie, e nella successiva inizieremo a `costruire categorie nuove dalle vecchie', cioè a definire il `prodotto' $\ctC\times\ctD$ e la somma $\ctC+\ctD$ di due categorie date (si veda \autoref{}), le categorie \emph{comma} $\ctC/X$ e \emph{cocomma} $X/\ctC$ sopra un oggetto $X\in\ctC_0$ (si veda \autoref{}), la categoria \emph{opposta} $\ctC^\op$ di $\ctC$, e molte altre.

La dicotomia essenziale che invitiamo il lettore ad apprezzare è questa:
\begin{itemize}
    \item le categorie sono strutture ideate per raccogliere la totalità di oggetti matematici di un dato tipo in una classe $\ctC$ (in \emph{due} classi: gli oggetti e i morfismi) e studiarne le proprietà globali: le categorie (grandi) quindi sono `universi del discorso matematico'.
    \item D'altra parte le categorie sono anche delle strutture matematiche a sé stanti, modellate sulla nozione elementare di \emph{multigrafo diretto} (si veda \autoref{}): le categorie (piccole) quindi sono esse stesse degli oggetti matematici che possiamo studiare nella loro totalità.
\end{itemize}
La prima di queste osservazioni si basa sul fatto che un dato ambito della matematica si occupa o `vive' in una o più categorie. Per esempio, l'algebra lineare studia le categorie $\bbF\emdash\ctVect$ di spazi vettoriali, eventualmente su diversi campi di base. La topologia generale studia le categorie di spazi topologici, mentre la topologia differenziale si restringe alla categoria i cui oggetti sono varietà (e i morfismi funzioni differenziabili), oppure studia particolari categorie di strutture ordinate (perché l'insieme degli aperti di uno spazio topologico $X$ con una topologia $\tau \subseteq 2^X$ forma, con le operazioni di unione e intersezione, una struttura chiamata \emph{algebra di Heyting}, si veda \cite{}). Ma l'analisi funzionale studia quegli spazi \emph{vettoriali} (di dimensione infinita) che sono dotati di una \emph{topologia} metrizzabile (e determinata da un filtro di intorni dello zero), ed eventualmente di un prodotto scalare; la teoria della rappresentazione studia i \emph{gruppi} mediante omomorfismi in un gruppo di matrici, o le proprietà \emph{topologiche-differenziali} di questi gruppi di matrici (il gruppo ortogonale speciale, il gruppo dei quaternioni di norma 1, eccetera).

La seconda di queste osservazioni non è meno importante: porterà alla definizione di funtore (si veda \autoref{}), come \emph{omomorfismo tra categorie}, e alla definizione di trasformazione naturale (si veda \autoref{}), come \emph{omomorfismo tra funtori}.

Iniziamo con degli esempi di categorie piccole:
\begin{example}
    \Todo{la categoria vuota}
\end{example}
\begin{example}
    \Todo{la categoria terminale}
\end{example}
\begin{example}
    \Todo{la categoria discreta su un insieme $A$}
\end{example}
\begin{example}
    \Todo{la categoria codiscreta su un insieme $A$}
\end{example}
\begin{example}
    \Todo{la `freccia generica'}
\end{example}
\begin{example}
    \Todo{la `catena generica' $0\to 1\to\dots\to n$}
\end{example}
\begin{example}
    \Todo{la `doppia freccia generica'}
\end{example}
\begin{example}
    \Todo{il quadrato generico, il cubo generico, l'$n$-cubo generico}
\end{example}
\begin{example}
    \Todo{lo `span generico' e il `cospan generico'}
\end{example}
\begin{example}
    \Todo{ogni grafo dà luogo a una categoria}
\end{example}
Due esempi più elaborati, ma molto `concreti', di categorie dove gli oggetti sono numeri naturali:
\begin{example}
    \Todo{la categoria dei circuiti elettrici}
\end{example}
\begin{example}
    \Todo{la categoria dei diagrammi di flusso}
\end{example}
Proseguiamo con degli esempi di categorie grandi:
\begin{example}
    \Todo{Insiemi finiti e funzioni (il primo esempio motivante)}
\end{example}
\begin{example}
    \Todo{`Numeri naturali e matrici' (il secondo esempio motivante)}
\end{example}
\begin{example}
    \Todo{Tutti gli insiemi e funzioni, tutti gli spazi vettoriali}
\end{example}
\begin{example}
    \Todo{Insiemi e relazioni}
\end{example}
\begin{example}
    \Todo{Gruppi/monoidi e omomorfismi}
\end{example}
\begin{example}
    \Todo{Omomorfismi per una generica segnatura algebrica}
\end{example}
\begin{example}
    \Todo{Spazi e funzioni continue}
\end{example}
\begin{example}
    \Todo{Insiemi ordinati e funzioni monotone}
\end{example}
\begin{example}
    \Todo{Insiemi ordinati e funzioni monotone}
\end{example}
\begin{example}
    \Todo{Insiemi e funzioni parziali}
\end{example}
\begin{example}
    \Todo{Insiemi puntati}
\end{example}
\begin{example}
    \Todo{Streams (coalgebre per liste non vuote)}
\end{example}
% \begin{itemize}
%   \item Come accennato sopra, gli spazi vettoriali su $\bbR$ e le mappe lineari formano una categoria, che chiamiamo $\bbR\emdash\ctVect$. Più in generale possiamo definire la categoria $\bbF\emdash\ctVect$, per un campo $\ictF$, in maniera analoga.
%   \item Gli insiemi e le funzioni formano una categoria, che chiamiamo $\ctSet$.
%   \item I gruppi e gli omomorfismi di gruppo formano la categoria $\ctGrp$.
%   \item I gruppi abeliani e gli omomorfismi di gruppo formano la sottocategoria $\ctAb\subseteq\ctGrp$. (Definiremo le sottocategorie a breve.)
%   \item Gli spazi topologici e le funzioni continue formano la categoria $\ctTop$.
%  \end{itemize}
% \end{examples}

Qualsiasi circostanza in cui una classe di strutture possiede una nozione ovvia di `omomorfismo' tale che
\begin{itemize}
    \item l'identità è un omomorfismo;
    \item la composizione di due omomorfismi è ancora un omomorfismo;
\end{itemize}
definisce la classe degli oggetti e dei morfismi di una categoria. (Gli esempi di strutture algebriche sono tutti di questo tipo; ne esistono altri: la composizione di due mappe proprie tra spazi di Hausdorff è ancora una mappa propria.)

Questo modo di intendere la definizione però oscura un'altra idea importante, perché potrebbe far sospettare che gli oggetti di una categori siano, alla fine, sempre insiemi dotati di strutture ulteriori (per esempio, operazioni o relazioni), e i morfismi funzioni che preservano queste strutture.

Invece, non tutte le categorie sono di questo tipo:
\Todo{qui sarebbe bello dire qualcosa di più, ma dobbiamo pensare a come}
\begin{example}
 Una relazione di equivalenza si può vedere come una particolare categoria. Consideriamo un insieme $X$ con una relazione di equivalenza indicata con il simbolo $\sim$.
 Definiamo la seguente categoria:
 \begin{itemize}
  \item Gli oggetti sono gli elementi di $X$;
  \item Esiste un unico morfismo da $x$ a $y$ (e uno da $y$ a $x$) se e solo se $x\sim y$.
 \end{itemize}
 Per ogni oggetto $x$, l'identità è l'unico morfismo $x\to x$ dato dal fatto che la relazione è riflessiva ($x\sim x$).
 La composizione è data dalla transitività: se abbiamo morfismi $x\to y$ e $y\to z$ significa, in particolare, che $x\sim y$ e $y\sim z$. Per transitività, $x\sim z$, e quindi c'è un unico morfismo $x\to z$, che possiamo prendere come composizione.
 Gli assiomi di unitalità e associatività sono automaticamente soddisfatti: per esempio, dati $w\sim x\sim y\sim z$, per transitività abbiamo che $w\sim z$, e questo dà un \emph{unico} morfismo $w\to z$, non importa se lo otteniamo componendo prima $w\sim x$ e $x\sim y$ o prima $x\sim y$ e $y\sim z$---il risultato è lo stesso per unicità.
\end{example}
Questo è un primo esempio di categoria in cui \emph{gli oggetti non sono insiemi con strutture ulteriori}, ma non è quello minimale: la proprietà di \emph{simmetria} delle relazioni di equivalenza non serve per avere una categoria. Consideriamo i seguenti esempi (che raccogliamo in dei teoremi, di cui diamo una dimostrazione completa, perché questi esempi sono pedagogicamente rilevanti).
\begin{theorem}\label{pos_sonocat}
    \Todo{ogni poset, e in effetti ogni preordine, definisce una categoria; copia da sotto}
\end{theorem}
\begin{theorem}
    \Todo{rovescio: una categoria dove ogni hom-set ha al piu un elemento è un preset}
\end{theorem}
\begin{examples}
 Una relazione d'ordine $(X,\le)$ si può vedere come una categoria, ancora una volta con un unico morfismo $x\to y$ se e solo se $x\le y$. Come nel caso delle relazioni di equivalenza, le identità sono date dalla proprietà riflessiva e la composizione dalla proprietà transitiva.

 Più in generale, un \emph{preordine} è una relazione riflessiva e transitiva, ma non necessariamente simmetrica o antisimmetrica. Ogni preordine si può vedere come una categoria.
\end{examples}
\begin{theorem}\label{mon_sonocat}
\Todo{ogni monoide definisce una categoria; copia da sotto}
\end{theorem}
\begin{theorem}
    \Todo{una categoria con un solo oggetto `è' un monoide}
\end{theorem}
\color{blue}
\begin{example}
 Un monoide si può vedere come una categoria con un solo oggetto---più precisamente, una categoria \emph{localmente piccola} con un solo oggetto.
 Vediamo come. Dato un monoide $M$, definiamo la seguente categoria, che indichiamo con $\ctB M$.\footnote{A volte la categoria definita in questo modo si indica con $\ctB M$, a volte semplicemente con $M$.}
 \begin{itemize}
  \item La categoria $\ctB M$ ha un unico oggetto, che indichiamo con un punto, $\bullet$;
  \item La categoria $\ctB M$ ha un morfismo $m:\bullet\to\bullet$ per ogni elemento $m\in M$;
  \item L'identità dell'unico oggetto $m$ è il morfismo definito dall'elemento neutro $e\in M$;
  \item La composizione di morfismi è data dal prodotto in $M$.
 \end{itemize}
 In un monoide, a differenza di una categoria generica, possiamo sempre comporre due morfismi $m$ e $n$: questo è garantito dal fatto che siccome c'è un solo oggetto, il dominio e il codominio di $m$ ed $n$ sono necessariamente uguali.

 Viceversa, data una categoria localmente piccola con un solo oggetto (indichiamolo ancora con questo simbolo, $\bullet$), l'insieme di morfismi $\bullet\to\bullet$ ha una struttura di monoide con l'elemento neutro dato dall'identità, e il prodotto dato dalla composizione.

 L'unitalità e l'associatività del monoide e della categoria si corrispondono.
\end{example}

In particolare, ogni gruppo si può vedere come una categoria con un solo oggetto.
Dato un oggetto $X$ di una categoria, un morfismo da $X$ a $X$ si chiama anche \emph{endomorfismo}. In un monoide, tutti i morfismi sono endomorfismi.

\begin{remark}
 Abbiamo visto che i gruppi sono gli oggetti della categoria $\ctGrp$, ma anche che ogni gruppo si può a sua volta vedere come una categoria (con un solo oggetto). Entrambe le prospettive sono valide, e ce ne sono altre ancora.
 Allo stesso modo, gli ordini parziali sono categorie, ma si possono anche vedere come oggetti della categoria $\ctPos$, dove i morfismi sono le funzioni monotone.
 Spesso, in teoria delle categorie, la stessa struttura matematica può apparire in modi diversi in contesti diversi, e questa varietà di prospettive è uno dei motivi per cui le categorie sono così versatili.
\end{remark}

% Concludiamo questa sezione con alcuni esempi estremi di categorie, utili per controesempi e casi limite.

% \begin{examples}
%  Consideriamo un insieme $X$. Possiamo considerarlo una categoria in due modi:
%  \begin{itemize}
%   \item La \emph{categoria discreta su $X$} ha come oggetti gli elementi di $X$, e gli unici morfismi sono le identità.
%   \item La \emph{categoria codiscreta su $X$} ha come oggetti gli elementi di $X$, e un unico morfismo tra ogni due elementi.
%  \end{itemize}
%  La categoria discreta, equivalentemente, è la relazione di equivalenza discreta (la relazione di uguaglianza).
%  La categoria codiscreta si può vedere come un'unica grande classe di equivalenza su $X$.
% \end{examples}

% \begin{example}
%  La \emph{categoria terminale} o \emph{unitaria}, che indichiamo con $\cate{1}$, ha un solo oggetto e un solo morfismo (identità).
% \end{example}

% \begin{example}
%  La \emph{categoria vuota} non ha oggetti né morfismi.
% \end{example}

% Tutte le categorie descritte finora sono localmente piccole.


\subsubsection*{Esercizi}
\begin{enumerate}
    \item Un \emph{grafo diretto} (chiamato anche \emph{digrafo}) è un insieme $V$, i cui elementi chiamiamo \emph{vertici}, e una relazione $E\subseteq V\times V$, i cui elementi chiamiamo \emph{spigoli}. Diciamo che $x$ è \emph{adiacente} a $y$ se esiste uno spigolo $(x,y)\in E$. Un \emph{omomorfismo di grafi diretti} $f:(V,E)\to (V',E')$ è una funzione $f:V\to V'$ tale che se $x$ è adiacente a $y$, allora $f(x)$ è adiacente a $f(y)$. Dimostra che i grafi diretti e i loro omomorfismi formano una categoria.
    \item Un \emph{multigrafo diretto} (chiamato anche \emph{multidigrafo}) è definito similmente a un grafo diretto, ma può avere diversi spigoli tra gli stessi due vertici. Un multidigrafo consiste di un insieme $V$ (i \emph{vertici}), e un insieme $E$ (gli \emph{spigoli}), con due funzioni $d_-,d_+:E\to V$, che associano un ``dominio'' e un ``codominio'' ad ogni spigolo. Un \emph{omomorfismo di multigrafi diretti} $(V,E)\to (V',E')$ consiste di una funzione $f_0:V\to V'$ tra i vertici, e una funzione $f_1:E\to E'$ tra gli spigoli, compatibili con le mappe $d_-,d_+$ nel seguente modo:
    \[
    d_-(f_1(e)) = f_0(d_-(e)) ,\qquad d_+(f_1(e)) = f_0(d_+(e)) .
    \]
    Dimostra che $f_1:E\to E'$ associa a uno spigolo tra $x$ e $y$ uno spigolo tra $f_0(x)$ e $f_0(y)$.
    \item Dimostra che i multigrafi diretti e i loro omomorfismi formano una categoria.
    \item Una categoria piccola si può vedere come un multigrafo con identità e composizione: riscrivi la definizione di categoria (piccola) in termini di multigrafi.  In che modo questa costruzione generalizza la definizione di monoide (come insieme con identità e composizione)?
    \item Un grafo diretto si può vedere come un multigrafo dove tra due vertici c'è al massimo uno spigolo. Dimostra che la costruzione al punto 3, se applicata ad un grafo diretto, dà un preordine.\Todo{Cambierei questo esercizio dato che preferirei dimostrare esplicitamente un enunciato analogo}
\end{enumerate}
\color{black}
\cippo
\section{Isomorfismi}\label{isomorfismi}

In vari ambiti della matematica ci sono modi di indicare situazioni in cui due oggetti sono ``praticamente la stessa cosa'' o in cui ``si può passare dall'uno all'altro senza problemi''. La nozione di isomorfismo in teoria delle categorie generalizza molte di queste idee.

\begin{definition}
 Dati due oggetti $X$ e $Y$ in una categoria $\ctC$, un \emph{isomorfismo} tra $X$ e $Y$ è una coppia di morfismi $f:X\to Y$ e $g:Y\to X$ tali che $g\circ f=\id_X$ e $f\circ g=\id_Y$.
 $f$ è chiamato l'\emph{inverso} di $g$, e a volte si indica con $g^{-1}$, e viceversa.

 Se esiste un isomorfismo tra $X$ e $Y$ diciamo che i due oggetti sono \emph{isomorfi}.
\end{definition}

Può essere utile un'interpretazione grafica: intuitivamente, un isomorfismo è una situazione dove l'applicazione di $f$ si può invertire o annullare tramite $g$, e viceversa, e si può sempre passare da $X$ a $Y$ senza perdere informazioni.
\[
\begin{tikzcd}
 X \ar[shift left]{r}{f} & Y \ar[shift left]{l}{g}
\end{tikzcd}
\]

Normalmente si indica la coppia $(f,g)$ solo con $f$ o con $g$, lasciando l'inverso implicito (l'inverso, se esiste, è unico, si vedano gli esercizi).

\begin{examples}
 La definizione di isomorfismo comprende molte delle nozioni di ``struttura equivalente'' usate in matematica:
 \begin{itemize}
  \item In $\ctSet$, gli isomorfismi sono le biiezioni, o corrispondenze biunivoche. In particolare, due insiemi sono isomorfi se e solo se hanno la stessa cardinalità.
  \item In $\bbR\emdash\ctVect$, gli isomorfismi sono le biiezioni lineari. In particulare, in dimensione finita, due spazi vettoriali sono isomorfi se e solo se hanno la stessa dimensione.
  \item In $\ctTop$, gli isomorfismi sono gli omeomorfismi: funzioni continue con un'inversa continua.
  \item In $\ctGrp$, gli isomorfismi sono gli isomorfismi di gruppi.
 \end{itemize}
\end{examples}

\begin{warning}
 Spesso una categoria viene chiamata con il nome dei suoi oggetti ($\ctVect$, $\ctGrp$, eccetera), ma è importante sapere \emph{quali sono i morfismi} per sapere che struttura in particolare si sta studiando. Questo è particolarmente importante nel caso degli isomorfismi: per esempio, $\bbR$ e $\bbR^2$, come insiemi, sono isomorfi, ma non come spazi vettoriali. Per cui, nella categoria $\ctSet$, gli oggetti $\bbR$ e $\bbR^2$ sono isomorfi, ma non sono isomorfi se li intendiamo come oggetti della categoria $\ctVect$.
\end{warning}

Si noti che le condizioni $g\circ f = \id_X$ e $f\circ g=\id_Y$ servono entrambe, perché possono valere o non valere indipendentemente l'una dall'altra.
\begin{example}
 Nella categoria $\bbR\emdash\ctVect$, si consideri la mappa $f:\bbR\to\bbR^2$ data dall'inclusione dell'asse $X$, $x\mapsto(x,0)$. Data la proiezione sull'asse $X$ data da $g:\bbR^2\to\bbR$, $(x,y)\mapsto x$, si ha che $g\circ f=\id_\bbR$. Però non è vero che $f\circ g = \id_{\bbR^2}$. (E infatti i due oggetti non sono isomorfi come spazi vettoriali.)
\end{example}

\begin{definition}
 Una categoria in cui tutti i morfismi sono isomorfismi si chiama \emph{gruppoide}.\footnote{In inglese \emph{groupoid}. Da notare che una vecchissima terminologia coniata dal matematico norvegese Øystein Ore chiama `gruppoidi' quelli che oggi sono detti \emph{magmi}, insiemi dotati di una operazione binaria --e nessun altro assioma. Noi non useremo mai la terminologia di Ore.}
\end{definition}

\begin{example}
 Abbiamo visto che un preordine (una relazione riflessiva e transitiva) si può vedere come una categoria. Questa categoria è un gruppoide se e solo se la relazione è anche simmetrica (cioè, è un'equivalenza). Se $x\sim y$, abbiamo un unico morfismo $x\to y$. Questo morfismo è invertibile se e solo se esiste un morfismo $y\to x$, cioè, se anche $y\sim x$. (Si noti che non ci sono altre condizioni da soddisfare per avere un inverso: per esempio, il morfismo composto $x\to y\to x$ è necessariamente uguale a $\id_x$ per unicità.)
\end{example}

\begin{example}
 Abbiamo visto che ogni monoide $M$ si può considerare una categoria con un solo oggetto. Questa categoria è un gruppoide se e solo se $M$ è un gruppo. Infatti, un morfismo $m$ ammette un inverso nel senso della teoria delle categorie se e solo se ammette un inverso nel senso della teoria dei gruppi: $g\cdot g^{-1}=g^{-1}\cdot g = e$.
\end{example}

Un \emph{automorfismo} è un endomorfismo (un morfismo da un oggetto a sé stesso) invertibile. In un gruppo, tutti i morfismi sono automorfismi.

\begin{example}
 La categoria i cui oggetti sono gli insiemi e i cui morfismi sono biiezioni è un gruppoide. Quando si prendono solo gli insiemi finiti, questa categoria diventa molto interessante: consta della `unione disgiunta' (in un senso che preciseremo in \ref{}) di tutti i gruppi simmetrici\Todo{}
\end{example}

L'esempio precedente si può vedere come una sottocategoria di $\ctSet$.
Più in generale, data una categoria, possiamo sempre prendere la sottocategoria che contiene solo gli isomorfismi.

\begin{definition}
 Il \emph{cuore}\footnote{In inglese: \emph{core}} di una categoria $\ctC$ è il gruppoide ottenuto prendendo come oggetti gli oggetti di $\ctC$, e come morfismi gli isomorfismi di $\ctC$.
\end{definition}

Si vedano gli esercizi sul perché in questo modo si ottenga una categoria (con identità e composizione).


\subsubsection*{Esercizi}
\begin{enumerate}
    \item Dato un morfismo $f:X\to Y$ in una categoria $\ctC$, dimostra che se un'inverso per $f$ esiste, allora è unico.
    \item Dati due spazi metrici $X$ e $Y$, ricorda che una funzione $f:X\to Y$ si dice \emph{1-Lipschitz} se soddisfa la disuguaglianza
    \[
     d\big( f(x), f(x') \big) \le d(x,x')
    \]
    per ogni $x,x'\in X$. Dimostra che spazi metrici e le funzioni 1-Lipschitz formano una categoria, chiamata $\cate{Met}_\cate{Lip}$, e che gli isomorfismi di $\cate{Met}_\cate{Lip}$ sono le isometrie. Fornisci un esempio di due spazi metrici isomorfi in $\ctTop$, ma non in $\cate{Met}_\cate{Lip}$.
    \item Costruisci un esempio in $\ctTop$ di oggetti $X$ e $Y$ non isomorfi, e morfismi $f:X\to Y$ e $g:Y\to X$ tali che $g\circ f=\id_X$ (ma $f\circ g \ne \id_Y$).
    \item Dimostra che in ogni categoria, le identità sono isomorfismi, e che la composizione di isomorfismi è un isomorfismo.
    \item In una categoria localmente piccola $\ctC$, dati due oggetti isomorfi $X$ e $Y$, dimostra che per ogni oggetto $A$, gli insiemi $\Hom{C}(A,X)$ e $\Hom{C}(A,Y)$ sono in corrispondenza biunivoca.
\end{enumerate}


\section{Funtori e diagrammi}

% motivazione

\begin{definition}
 Date due categorie $\ctC$ e $\ctD$, un \emph{funtore} $F:\ctC\to\ctD$ consiste dei seguenti dati.
 \begin{itemize}
  \item Un'assegnazione ad ogni oggetto $X$ di $\ctC$ di un oggetto $FX$ di $\ctD$;
  \item Un'assegnazione ad ogni morfismo $X \xrightarrow{f} Y$ di $\ctC$ di un morfismo $FX \xrightarrow{Ff} FY$ di $\ctD$ (si noti che $F(\dom{f})=\dom{Ff}$ e $F(\cod{f})=\cod{Ff}$);

  che soddifa le seguenti proprietà.
  \item \emph{Preservazione delle identità}: per ogni oggetto $X$ di $\ctC$, $F(\id_X)=\id_{FX}$;
  \item \emph{Preservazione delle composizioni}: per ogni coppia di morfismi componibili $f$ e $g$ di $\ctC$, $F(g\circ f)=Fg\circ Ff$.
 \end{itemize}
\end{definition}

% esempi: funzioni monotone
% esempi: omomorfismi
% esempi: rappresentazioni e azioni di gruppo
% esempi: funtori ``dimenticanti''
% esempi: funtori ``liberi''
% altri esempi?

% composizione di funtori, Cat

% diagrammi
% diagrammi commutativi
% funtori li preservano - in particolare, preservano iso

\subsubsection*{Esercizi}
\begin{enumerate}
    \item
    \item
    \item
    \item
    \item
\end{enumerate}


\section{Operazioni tra categorie}

% categoria opposta, funtori controvarianti, prefasci
% categoria prodotto, categoria somma, bifuntori
% hom
% categorie slice e coslice
% spazi puntati come coslice
% scheletri

\subsubsection*{Esercizi}
\begin{enumerate}
    \item
    \item
    \item
    \item
    \item
\end{enumerate}


\section{Trasformazioni naturali}

\subsubsection*{Esercizi}
\begin{enumerate}
    \item
    \item
    \item
    \item
    \item
\end{enumerate}
